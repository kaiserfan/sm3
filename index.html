<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>SM3</title>
<style>
    p {font-family:Monospace;font-size:26px;}
</style>
<script type='text/javascript' src='script/sm3.js'></script>
<script>
function display(){
    var str = document.getElementById("code").value;
    document.getElementById("demo").innerHTML=seperateBy4Byte(sm3Digest(str), ' ');
}

function seperateBy4Byte(str, seperator) {
    var arr = str.split('');
    for (var i = 8; i < (str.length + (str.length - 1 >>> 3)); i += 8) {
        //每 8 个字符插入一个分隔符
        arr.splice(i, 0, seperator);
        i++;
    }
    return arr.join('');
}

function trigEnter() {
	var event = window.event;
    if(13 == event.keyCode){
     	display();
    }
}
</script>
</head>
<body>

<h1>SM3 加密</h1>
<p>02345678 12345678 22345678 32345678 42345678 52345678 62345678 72345678</p>
<p id="demo"></p>

明文：<input id='code' type='txt' name='明文' onkeydown="trigEnter()">
<button id="btn" type="button" onclick="display()">加密</button>

</body>
</html>
